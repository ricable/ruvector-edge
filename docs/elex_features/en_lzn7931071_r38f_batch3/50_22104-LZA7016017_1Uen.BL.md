---
complexity_score: 13.5
converted_at: '2025-08-13T06:58:42.074494Z'
file_type: html
format: html
image_processing_enhanced: true
images_extracted: 2
images_saved: 3
original_path: 50_22104-LZA7016017_1Uen.BL.html
pictures_extracted: 2
processing_method: docling_multimodal
quality_score: 9.0
source_file: 50_22104-LZA7016017_1Uen.BL.html
source_zip: en_lzn7931071_r38f.zip
tables_extracted: 13
zip_image_types:
- .svg
- .png
- .gif
- .jpg
- .bmp
zip_images_total: 2796
---

# 

QoS Framework

Contents

![Image](../images/50_22104-LZA7016017_1Uen.BL/additional_3_CP.png)

![Image](../images/50_22104-LZA7016017_1Uen.BL/additional_3_CP.png)

- Overview
- Dependencies
- Feature Operation
    - QoS-Controlled SR Scheduling
    - QoS and Downlink Multi-User MIMO Low/Mid-Band Interaction
- Network Impact
- Parameters
- Performance
- Activate Non-License-Controlled Features
- Engineering Guidelines
    - Configure PDCP Packet-Reordering Timers
    - Configure RLC Timers
    - Configuration Options Related to NR Service-Adaptive User Plane Profile
        - Deprecation Handling
        - Migration Information
- Appendix: Feature Change History
    - Appendix: 20.Q3: Multiple DRBs per PDU sessions
    - Appendix: 22.Q4: QoS-Controlled SR Scheduling
    - Appendix: 23.Q2: Enhanced Radio Resource Partitioning Configuration Flexibility in NR

# 1 QoS Framework Overview

This feature supports multiple PDU sessions in NR Standalone, using QoS flows with

associated DRBs.

| Feature Name           | QoS Framework                                           |
|------------------------|---------------------------------------------------------|
| Feature Identity       | FAJ 121 5157                                            |
| Value Package Name     | NR Base Package                                         |
| Value Package Identity | FAJ 801 4002                                            |
| Node Type              | Baseband Radio Node                                     |
| Access Type            | NR                                                      |
| Licensing              | Non-license-controlled feature. No license is required. |

Summary

The feature supports multiple PDU sessions with QoS flows mapped to separate

DRBs.

The feature includes the following functions:

- Control plane signaling for PDU session resources with QoS flows, and mapping of QoS flows to DRBs
- QoS mapping framework
- QoS-Controlled SR Scheduling Note: This function is only supported in Low-Band and Mid-Band.
- User plane functionality with mapping of PDUs between QoS flows and DRBs

The feature supports QoS for EN-DC users by a straight mapping of QCI to 5QI.

Additional Information

Information and topics related to this feature can be found in the following

documentation:

- 3GPP TS 38.300, NR; Overall Description; Stage 2
- 3GPP TS 38.331, NR; Radio Resource Control (RRC); Protocol Specification
- 3GPP TS 38.413, NR; NG-RAN; NG Application Protocol (NGAP); Protocol Specification
- 3GPP TS 24.501, Non-Access-Stratum (NAS) protocol for 5G System (5GS)
- 3GPP TS 23.502, Access to the 3GPP 5G Core Network (5GCN) via non-3GPP access networks

# 2 Dependencies of QoS Framework

The QoS Framework feature has prerequisite and related features.

Table 1   Feature Dependencies

| Feature Name                                                          | Feature Identity   | Access Type   | Relationship   | Description                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
|-----------------------------------------------------------------------|--------------------|---------------|----------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| NR Standalone                                                         | FAJ 121 5060       | NR            | Prerequisite   | The NR Standalone feature allows establishment and modification of                                 PDU sessions and QoS flows for the UE by the operation of Data                                 Transfer.                                                                                                                                                                                                                                                                                                                                                            |
| Basic Voice over NR                                                   | FAJ 121 5219       | NR            | Related        | 5QI values for Basic Voice over NR are configured with the use of QoS                                 Framework.                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| LTE-NR Dual Connectivity                                              | FAJ 121 4908       | NR            | Related        | The QoS Framework feature supports QoS for EN-DC users by a straight                                 mapping of QCI to 5QI, that is, QCI=x is treated as 5QI=x.                                                                                                                                                                                                                                                                                                                                                                                                        |
| UE Grouping Framework                                                 | FAJ 121 5314       | NR            | Related        | The QoS-Controlled SR Scheduling function of the QoS Framework can be                                 enabled with the SrHandlingUeCfg.srHandlingMode                                 attribute and differentiated by the UE Grouping Framework.  It is recommended to use the UE Grouping Framework feature when                                 specific downlink RLC timer configurations are needed for different                                 UE groups. Otherwise, the base instance of the                                     DrbRlcUeCfg MO class is used. |
| NR 256-QAM Downlink High-Band                                         | FAJ 121 5476       | NR            | Related        | It is recommended to use the RLC timer configurations described in                                 the QoS Framework feature description during high data rate when the                                 NR 256-QAM Downlink High-Band feature is enabled.                                                                                                                                                                                                                                                                                                              |
| NR Radio Resource Partitioning                                        | FAJ 121 5337       | NR            | Related        | Some services and traffic types can be limited in capacity       depending on the mapping to radio resource partitions and the resource shares configured.                                                                                                                                                                                                                                                                                                                                                                                                             |
| Downlink Multi-User MIMO                                 Low/Mid-Band | FAJ 121 5130       | NR            | Related        | In general, UEs are scheduled according to priority. If the       Downlink Multi-User MIMO Low/Mid-Band feature is enabled, scheduling is not only based on UE       priority, but also on other pairing opportunities to maximize cell throughput with       MU-MIMO.                                                                                                                                                                                                                                                                                                 |
| Enhanced UE QoS Control in Uplink                                     | FAJ 121 5720       | NR            | Related        | The QoS Framework feature can be used to configure the UE uplink Logical Channel                   Priority for each DRB.                                                                                                                                                                                                                                                                                                                                                                                                                                              |

Hardware

No specific hardware requirements.

Limitations

The QoS Framework feature allows for the following capabilities for

NR standalone and NR-DC UEs:

- Up to eight PDU sessions for each UE
- Four DRBs for each PDU session
- One QoS flow for each DRB
- Up to eight DRBs for each UE

The feature allows up to eight DRBs for each of the following

UEs:

- NR standalone
- NR-DC
- EN-DC

The following QoS-separated PM counters are not possible to separate for user-defined

QoS classes:

- pmMacContentionDelayDlMaxQos
- pmMacLatTimeDlDrxSyncQos
- pmMacLatTimeDlDrxSyncSampQos
- pmMacLatTimeDlNoDrxSyncQos
- pmMacLatTimeDlNoDrxSyncSampQos

These PM counters report all occurrences related to any user-defined class on QoS=253

or QoS=254. QoS=253 is used for EN-DC traffic, and QoS=254 is used for NR standalone

traffic.

Separation of QoS classes is only possible for the following predefined QoS

classes:

- 1-9
- 65-67
- 69
- 70
- 79-86
- 128-137

The QoS-Controlled SR Scheduling function is only supported in Low-Band

and Mid-Band.

Network Requirements

No specific network requirements.

# 3 Feature Operation of QoS Framework

This feature supports multiple PDU sessions in NR SA and

NR-DC using QoS flows with associated

DRBs.

Control Plane Procedures

In NR SA and NR-DC, a PDU session provides user data

transport between a UE and an Access Point in the 5GC. A PDU session can contain one

or more QoS flows, which are data flows with specific requirements on QoS. The QoS

flows for a PDU session are mapped to DRBs. A QoS flow usually corresponds to a

service, for example Voice over NR.

The QoS Framework feature allows having up to eight QoS flows for a PDU session, and

each QoS flow is mapped to a separate DRB. The PDU sessions can be released

individually. If the last PDU session is released, the UE is also released into idle

mode.

The feature adds functionality in the E1, F1, NG, and RRC interfaces needed for

control plane signaling.

QoS Mapping Framework

The requirements for QoS flows are described by the 5QI. These are provided by the

5GC in the NGAP control plane signaling. In NR SA, the 5QI values are mapped to the

following types of parameters:

- QoS profile parameters
- Layer 2 and Layer 3 parameters that depend on the QoS requirements for flows

The QoS Framework feature supports QoS for EN-DC users by a straight mapping of QCI

to 5QI, that is, QCI=x is treated as 5QI=x.

For more information about QoS flow mapping, see E2E QoS Guideline.

User Plane Functionality

The NR SA and NR-DC user plane functionality maps data

flows between the PDU session user plane and Service Data Adaptation Protocol (SDAP)

entities. SDAP transmits data between a gNodeB in NR SA and

NR-DC deployment and the UE, and it also identifies the QoS flows that

PDUs belong to. QoS flow identifiers are used for this purpose. PDUs for the

corresponding QoS flow are sent between the 5GC and the gNodeB in NR SA

and NR-DC deployment using the PDU session user plane

protocol. This also helps identify which PDUs the flows belong to.

For more information about procedures for setting up and releasing PDU sessions, see

NR Standalone.

## 3.1 QoS-Controlled SR Scheduling

With this function enabled, the initial scheduling request priority starts according

to the highest priority DRB of the UE. The function can be enabled with the

SrHandlingUeCfg.srHandlingMode attribute, and differentiated by the

UE Grouping Framework.

Figure 1   Scheduling Request Priority

Operational Process

1. If the function is enabled, initial scheduling request priority starts at the same priority as the highest priority DRB of the UE.
2. The priority increases with time, based on channel condition and buffer status.
3. After a predefined time interval, the scheduling request priority is increased to a higher level than any other DRB of the UE.

For more information on scheduling, see Scheduler Low-Band and Scheduler Mid-Band.

UE Grouping Framework Integration

The function can be enabled with the

SrHandlingUeCfg.srHandlingMode attribute set to

SR\_PRIO\_5QI. The

SrHandlingUeCfg=Base MO is created

automatically when the SrHandling MO is created, unless they are

created manually in the same transaction. Other MO instances can be created and

deleted manually for further UE group differentiation, and differentiated by the UE

Grouping Framework. For more information on UE groups, see UE Grouping Framework.

Conditional DRBs

Some services have background DRBs that are always active.

While configuring the initial scheduling request priority of a UE, conditional DRBs

allow the feature to take the priority of the background DRBs into consideration

only when the conditional DRB is established.

The conditions can be configured through the

SrHandlingUeCfg.conditional5qi attribute.

## 3.2 QoS and Downlink Multi-User MIMO Low/Mid-Band Interaction

The Downlink Multi-User MIMO

Low/Mid-Band

feature can improve cell capacity by co-scheduling UEs with the same frequency and time

resources.

UEs are normally scheduled according to priority. However, if the Downlink Multi-User

MIMO

Low/Mid-Band

feature is enabled, the scheduler checks if there are UEs that can be paired on the same

PRB according to the MU-MIMO selection criteria.

Therefore, scheduling is not only based on UE priority, but also on other pairing

opportunities to maximize cell throughput with MU-MIMO.

# 4 Network Impact of QoS Framework

The feature impacts capacity and interface

signaling.

Capacity and Performance

The QoS Framework feature increases capacity to eight PDU sessions for each UE.

Interfaces

Signaling on the NG-C interface is increased due to the higher number of the PDU

sessions allowed.

The following messages are related to the feature:

- NGAP: PDU SESSION RESOURCE SETUP REQUEST
- NGAP: PDU SESSION RESOURCE SETUP RESPONSE

The feature introduces the following messages over the NG-C interface:

- NGAP: PDU SESSION RESOURCE MODIFY REQUEST
- NGAP: PDU SESSION RESOURCE MODIFY RESPONSE
- NGAP: PDU SESSION RESOURCE RELEASE COMMAND
- NGAP: PDU SESSION RESOURCE RELEASE RESPONSE

Other Network Elements

No impact.

# 5 Parameters for QoS Framework

The QoS-Controlled SR Scheduling function introduces new MOM attributes for

configuration.

Table 2

| Parameter                        | Type       | Description          |
|----------------------------------|------------|----------------------|
| DU5qi.srHandlingRef              | Introduced | See MOM description. |
| DUModified5qiUeCfg.srHandlingRef | Introduced | See MOM description. |
| SrHandling.reservedBy            | Introduced | See MOM description. |
| SrHandling.ueConfGroupType       | Introduced | See MOM description. |
| SrHandling.userLabel             | Introduced | See MOM description. |
| SrHandlingUeCfg.ueGroupList      | Introduced | See MOM description. |
| SrHandlingUeCfg.prefUeGroupList  | Introduced | See MOM description. |
| SrHandlingUeCfg.ueConfGroupList  | Introduced | See MOM description. |
| SrHandlingUeCfg.srHandlingMode   | Introduced | See MOM description. |
| SrHandlingUeCfg.conditional5qi   | Introduced | See MOM description. |

# 6 Performance of QoS Framework

This feature has counters and events that are related to PDU session and DRB

establishment, modification, and

release.

KPIs

This feature has no associated Key Performance Indicators (KPIs).

Counters

The following counters can be used to observe the feature:

- NRCellCU.pmPduSessionModifyAtt
- NRCellCU.pmPduSessionModifySucc
- NRCellCU.pmDrbEstabAtt5qi
- NRCellCU.pmDrbEstabSucc5qi
- NRCellCU.pmDrbRelAbnormalAmf5qi
- NRCellCU.pmDrbRelAbnormalGnb5qi
- NRCellCU.pmPduSessionRelAbnormalGnb
- NRCellCU.pmDrbRelNormal5qi
- NRCellCU.pmPduSessionEstabAtt
- NRCellCU.pmPduSessionEstabSucc
- NRCellCU.pmHoExeSuccOutDrbInterGnb5qi
- NRCellCU.pmHoExeSuccOutDrbEutran5qi

Events

The following PM events are related to the feature:

- CuCpNgPduSessionResourceSetupRequest
- CuCpNgPduSessionResourceSetupResponse
- CuCpNgPduSessionResourceModifyRequest
- CuCpNgPduSessionResourceModifyResponse
- CuCpNgPduSessionResourceReleaseCommand
- CuCpNgPduSessionResourceReleaseResponse

# 7 Activate Non-License-Controlled Features

Non-license-controlled features do not require manual activation and cannot be

deactivated.

While license-controlled features need to be activated, non-license-controlled features

are activated automatically during node integration. They also do not

have

a software license key associated, which means that they have no

entries in the LKF that is installed on the node.

In some cases, non-license-controlled features need to be configured

manually or have some of

their

subfunctions enabled to work properly.

# 8 Engineering Guidelines for QoS Framework

The QoS Framework feature is based on the NR Standalone feature. For basic configuration

details, see NR Standalone.

## 8.1 Configure PDCP Packet-Reordering Timers

NR PDCP packet-reordering timer configuration options are used for managing

QoS-related parameters for DRBs.

Steps

1. Set the CUCP5qi.tReorderingDl attribute to configure the timer in the UE for reordering packets for PDCP in downlink.
2. Set the CUCP5qi.tReorderingUl attribute to configure the timer in the gNodeB that is used to detect the loss of PDCP data units in uplink.

## 8.2 Configure RLC Timers

RLC protocol transports PDUs in AM for DRBs. It is responsible for

the

resegmentation and the reordering of RLC data PDUs.

Steps

1. Configure the following parameters of reception timers for AM and UM RLC on both the UE and the gNodeB to match the round-trip time for HARQ retransmissions. DrbRlcUeCfg.tReassemblyDl DrbRlcUeCfg.tReassemblyUl
2. RLC timer dependencies: Set the value of the DrbRlcUeCfg.tReassemblyDl attribute to a less than or equal to the value of the CUCP5qi.tReorderingDl timer to avoid unnecessary RLC PDU retention in buffer when the corresponding PDCP packets are already discarded due expiration of the tReordering. Set the value of the DrbRlcUeCfg.tReassemblyUl attribute to less than or equal to the value of the CUCP5qi.tReorderingUl and AqmCfg.tOooUlDelivery attributes to avoid discarding of lately reassembled UL packets.
3. Configure the following parameters to get faster RLC status feedback during high data rate: DrbRlcUeCfg.tReassemblyDlHighRate DrbRlcUeCfg.tStatusProhibitDlHighRate DrbRlcUeCfg.dlHighRateTimerSwitchEnabled
4. Tune the value of the parameters to match the round-trip time for HARQ retransmissions using the following formula: t-Reassembly = HARQrtt Ã— MaxHarqTrans HARQrtt The time needed to complete one HARQ transmission or retransmission. MaxHarqTrans The maximum number of HARQ transmissions performed before RLC starts to handle the retransmissions.

## 8.3 Configuration Options Related to NR Service-Adaptive User Plane Profile

The NR Service-Adaptive User Plane Profile feature introduces support for UE

group-differentiated user plane configuration and enhancements for downlink cell group

switching and AQM.

The NR Service-Adaptive User Plane Profile introduces and deprecates attributes, which

affect this feature.

For more information, see NR Service-Adaptive User Plane Profile.

### 8.3.1 Deprecation Handling

The following attributes are introduced for deprecation handling:

- GNBCUUPFunction.altDepHServAdapUPProfEnabled
- GNBDUFunction.altDepHServAdapUPProfEnabled
- GNBDUFunction.servAdapUPProfDepHEnabled

The GNBCUUPFunction.altDepHServAdapUPProfEnabled and the

GNBDUFunction.altDepHServAdapUPProfEnabled attributes control

whether the legacy or the updated MOM configuration is used.

If the following attributes are set to false, legacy attributes are used

with deprecation handling:

- GNBCUUPFunction.altDepHServAdapUPProfEnabled
- GNBDUFunction.altDepHServAdapUPProfEnabled

If the following attributes are set to true, the introduced MOM

configuration is used:

- GNBCUUPFunction.altDepHServAdapUPProfEnabled
- GNBDUFunction.altDepHServAdapUPProfEnabled

Node restart is required after both changes.

Backwards Compatible Changes

For backwards compatibility, the

GNBDUFunction.servAdapUPProfDepHEnabled attribute is used and

by default it is set to true.

All deprecated attribute values are copied from the NRCellDU MO

instances to the replacement attributes in the CgSwitchCfg MO

instances.

When normal deprecation handling is enabled, the MO instance of the introduced MO

class corresponding to the NRCellDU MO instance is automatically

deleted or created.

When normal deprecation handling is enabled, and the operator creates an

NRCellDU MO instance, instances of the following MO classes

must not be created manually:

- CgSwitch
- CgSwitchCfg
- CgSwitchUeCfg
- UeCC

If the operator wants to create instances of these MO classes together with

NRCellDU MO instances in the same transaction, the creation

of the NRCellDU MO instance must be ordered after the creation of

the listed MO classes.

Normal deprecation handling only works for NRCellDU MO instances

that are mapped to one CgSwitch MO instance, and if the number of

CgSwitch MO instances is at most 48. When an

NRCellDU MO instance is created, but there is no

CgSwitch MO instance left, deprecation handling is not

applied for that cell. Therefore, default values are used instead for the following

attributes:

- NRCellDU.endcDlLegSwitchEnabled
- NRCellDU.endcDlNrLowQualThresh
- NRCellDU.endcDlNrQualHyst

It is possible to control which configuration to use for each

NRCellDU instance by setting the

GNBDUFunction.servAdapUPProfDepHEnabled attribute to

false, even when more than 48 NRCellDU MO

instances are created. There is still a limitation of having 48 plus one

CgSwitch MO instances for configuration. Additionally, UE

grouping is only supported when the

GNBDUFunction.servAdapUPProfDepHEnabled attribute is set to

false.

Figure 2 shows normal deprecation

handling.

Figure 2   Normal Deprecation Handling

It is recommended to configure the user plane attributes in the

CgSwitchCfg MO class if the class is available in the

Management System.

It is recommended to update the attribute values in the introduced MO classes first,

when deprecation handling is disabled and the

GNBDUFunction.servAdapUPProfDepHEnabled attribute is set to

false.

Disabling deprecation handling prevents attributes in the

CgSwitchCfg MO instance from being overwritten in the

introduced management system versions. In these use cases, the

CgSwitchCfg MO instance is visible and used instead of the

deprecated attributes.

Non-Backwards Compatible Changes

Changes in the following MO classes are non-backwards compatible because of the

reduced cardinality of the introduced MO classes:

- AqmCfg
- DcDlCfg
- Drb
- DrbUeCfg
- UserPlaneProfile
- UserPlaneProfileUeCfg

Therefore, it is recommended to configure the user plane attributes in these MO

classes if they are available in the Management System.

If the change to the introduced MO classes and attributes is not performed before the

deprecation window ends, default values are applied if no configuration is

provided.

Figure 3 and Figure 4 show alternative deprecation

handling, when the altDepHServAdapUPProfEnabled attribute is set

to true.

Figure 3   Alternative Deprecation Handling in

GNBCUUPFunction

Figure 4   Alternative Deprecation Handling in

GNBDUFunction

It is recommended to migrate as soon as possible to the introduced attributes to

fully realize the benefits of the new configuration management for this feature, and

avoid using the following attributes:

- CUUP5qi.aqmMode
- CUUP5qi.dcDlPdcpAggrPrioCg
- CUUP5qi.dcDlPdcpAggrTimeDiffCg
- CUUP5qi.dcDlPdcpAggrTimeDiffProhibit
- CUUP5qi.dcDlPdcpAggrTimeDiffThresh
- CUUP5qi.estimatedE2ERTT
- CUUP5qi.l4sCfgRef
- CUUP5qi.packetDelayBudget
- CUUP5qi.packetDelayBudgetOffset
- CUUP5qi.tOooUlDelivery
- DU5qi.aqmMode
- DU5qi.estimatedE2ERTT
- DU5qi.packetDelayBudgetOffset
- GNBCUUPFunction.dcDlAggActTime
- GNBCUUPFunction.dcDlAggExpiryTimer
- GNBCUUPFunction.dcDlPdcpInitialMcgRate
- GNBCUUPFunction.dcDlPdcpInitialScgRate
- GNBCUUPFunction.dlPdcpSpsTargetTimeLTE
- GNBCUUPFunction.dlPdcpSpsTargetTimeNR
- GNBCUUPFunction.endcDlNrRetProhibTimer

The following attributes are deprecated:

- NRCellDU.endcDlLegSwitchEnabled
- NRCellDU.endcDlNrLowQualThresh
- NRCellDU.endcDlNrQualHyst

If the GNBCUUPFunction.altDepHServAdapUPProfEnabled attribute is

set to false, the following attributes are used:

- CUUP5qi.aqmMode
- CUUP5qi.dcDlPdcpAggrPrioCg
- CUUP5qi.dcDlPdcpAggrTimeDiffCg
- CUUP5qi.dcDlPdcpAggrTimeDiffProhibit
- CUUP5qi.dcDlPdcpAggrTimeDiffThresh
- CUUP5qi.estimatedE2ERTT
- CUUP5qi.l4sCfgRef
- CUUP5qi.packetDelayBudget
- CUUP5qi.packetDelayBudgetOffset
- CUUP5qi.tOooUlDelivery
- GNBCUUPFunction.dcDlAggActTime
- GNBCUUPFunction.dcDlAggExpiryTimer
- GNBCUUPFunction.dcDlPdcpInitialMcgRate
- GNBCUUPFunction.dcDlPdcpInitialScgRate
- GNBCUUPFunction.dlPdcpSpsTargetTimeLTE
- GNBCUUPFunction.dlPdcpSpsTargetTimeNR
- GNBCUUPFunction.endcDlNrRetProhibTimer

If the GNBCUUPFunction.altDepHServAdapUPProfEnabled attribute is

set to true, the following attributes are used:

- AqmCfg.aqmMode
- AqmCfg.estimatedE2ERTT
- AqmCfg.tDiscardDl
- AqmCfg.tOooUlDelivery
- DcDlCfg.dcDlAggAllowed
- DcDlCfg.dcDlAggCgPrioOverride
- DcDlCfg.dlPdcpPreferredCgOverride
- Drb.ueConfGroupType
- DrbUeCfg.aqmCfgRef
- DrbUeCfg.dcDlCfgRef
- DrbUeCfg.l4sCfgRef
- DrbUeCfg.prefUeGroupList
- DrbUeCfg.ueConfGroupList
- DrbUeCfg.ueGroupList
- UserPlaneProfile.ueConfGroupType
- UserPlaneProfileUeCfg.dcDlAggActTime
- UserPlaneProfileUeCfg.dcDlAggAgeDiffPreferredCg
- UserPlaneProfileUeCfg.dcDlAggAgeDiffProhibitTime
- UserPlaneProfileUeCfg.dcDlAggAgeDiffThresh
- UserPlaneProfileUeCfg.dcDlAggCgPrio
- UserPlaneProfileUeCfg.dcDlAggExpiryTimer
- UserPlaneProfileUeCfg.dcDlAggHighLatencyThresh
- UserPlaneProfileUeCfg.dcDlAggMcgDrxWakeupTime
- UserPlaneProfileUeCfg.dcDlAggScgDrxWakeupTime
- UserPlaneProfileUeCfg.dlPdcpMcgInitialRate
- UserPlaneProfileUeCfg.dlPdcpMcgSpsTargetTime
- UserPlaneProfileUeCfg.dlPdcpPreferredCg
- UserPlaneProfileUeCfg.dlPdcpScgInitialRate
- UserPlaneProfileUeCfg.dlPdcpScgRetProhibitTime
- UserPlaneProfileUeCfg.dlPdcpScgSpsTargetTime
- UserPlaneProfileUeCfg.prefUeGroupList
- UserPlaneProfileUeCfg.ueConfGroupList
- UserPlaneProfileUeCfg.ueGroupList
- UserPlaneProfileUeCfg.ulPdcpScgRetProhibitTime

If the GNBDUFunction.altDepHServAdapUPProfEnabled attribute is set

to false, the following attributes are used:

- DU5qi.aqmMode
- DU5qi.estimatedE2ERTT
- DU5qi.packetDelayBudget
- DU5qi.packetDelayBudgetOffset

If the GNBDUFunction.altDepHServAdapUPProfEnabled attribute is set

to true, the following attributes are used:

- AqmCfg.aqmMode
- AqmCfg.estimatedE2ERTT
- AqmCfg.tDiscardDl
- DrbUp.ueConfGroupType
- DrbUpUeCfg.aqmCfgRef
- DrbUpUeCfg.prefUeGroupList
- DrbUpUeCfg.ueConfGroupList
- DrbUpUeCfg.ueGroupList
- DU5qi.drbUpRef

If the switch to the introduced MO classes and attributes is not performed before the

deprecation window ends and no configuration is provided, the default values are

used for these attributes.

### 8.3.2 Migration Information

The NR Service-Adaptive User Plane Profile feature introduces attributes and MO

classes for UE group-differentiated user plane configuration, for downlink cell group

switching, and for AQM.

MO classes and attributes are introduced under the GNBCUUPFunction and

the GNBDUFunction MO classes to support the introduced

functionalities. These classes and attributes co-exist with deprecated attributes.

Therefore, the migration to the introduced attributes is recommended.

Guidelines for Migration from the GNBCUUPFunction MO Class to

the UserPlaneProfile MO Class

The migration described in this section does not use the UE Grouping Framework and

does not create UE-specific configuration.

The following rules must be considered:

- There is a single instance of the UserPlaneProfile MO class.
- The attribute values defined under the UserPlaneProfileUeCfg=Base MO instance are applied to all 5QIs and QCIs.

Table 3   Mapping between Legacy and Introduced Attributes under the

GNBCUUPFunction MO Class

| Legacy Attribute                       | Introduced Attribute                           |
|----------------------------------------|------------------------------------------------|
| GNBCUUPFunction.dcDlAggActTime         | UserPlaneProfileUeCfg.dcDlAggActTime           |
| GNBCUUPFunction.dcDlAggExpiryTimer     | UserPlaneProfileUeCfg.dcDlAggExpiryTimer       |
| GNBCUUPFunction.dcDlPdcpInitialMcgRate | UserPlaneProfileUeCfg.dlPdcpMcgInitialRate     |
| GNBCUUPFunction.dcDlPdcpInitialScgRate | UserPlaneProfileUeCfg.dlPdcpScgInitialRate     |
| GNBCUUPFunction.dlPdcpSpsTargetTimeLTE | UserPlaneProfileUeCfg.dlPdcpMcgSpsTargetTime   |
| GNBCUUPFunction.dlPdcpSpsTargetTimeNR  | UserPlaneProfileUeCfg.dlPdcpScgSpsTargetTime   |
| GNBCUUPFunction.endcDlNrRetProhibTimer | UserPlaneProfileUeCfg.dlPdcpScgRetProhibitTime |

Guidelines for Migration from the CUUP5qi MO Class to the

Drb and the UserPlaneProfile MO

Classes

The migration described in this section does not use the UE Grouping Framework and

does not create UE-specific configuration.

The following rules must be considered:

- The CUUP5qi.drbRef attribute must reference a Drb MO instance.
- The DrbUeCfg=Base MO instance must reference an AqmCfg MO instance and a DcDlCfg MO instance.
- Two or more CUUP5qi MO instances with the same attribute values can reference a single Drb MO instance. This results in the same AqmCfg and DcDlCfg MO instances being used for such CUUP5qi MO instances.
- Different Drb instances with a child DrbUeCfg=Base MO instance are needed for different AQM and PDCP settings. This results in different AqmCfg and DcDlCfg MO instances.
- Automatically created Drb MO instances can be referenced by any CUUP5qi MO instance.
- Automatically created instances of the following MO classes can be referenced by a Drb MO instance that is referenced by any CUUP5qi MO instance: AqmCfg DcDlCfg DrbUeCfg
- Manually created instances of L4sCfg MO class can be referenced by a Drb MO instance that is referenced by any CUUP5qi instance.

Table 4   Mapping between Legacy and Introduced Attributes under the

CUUP5qi MO Class

| Legacy Attribute                                           | Introduced Attribute                                                                                             | Note                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
|------------------------------------------------------------|------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| CUUP5qi.aqmMode                                            | AqmCfg.aqmMode                                                                                                   |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| CUUP5qi.dcDlPdcpAggrPrioCg                                 | DcDlCfg.dcDlAggAllowed                                                                                           | If the CUUP5qi.dcDlPdcpAggrPrioCg                                         attribute is set to NO_AGGREGATION, the                                             DcDlCfg.dcDlAggAllowed attribute is                                         set to false.  Otherwise, the DcDlCfg.dcDlAggAllowed                                         attribute is set to true.                                                                                                                                                                                                                                                                                                          |
| CUUP5qi.dcDlPdcpAggrPrioCg                                 | UserPlaneProfileUeCfg.dcDlAggCgPrio or                                             DcDlCfg.dcDlAggCgPrioOverride | The UserPlaneProfileUeCfg.dcDlAggCgPrio                                         attribute is defined on UE level with, meaning the same                                         value is used for all 5QIs and QCIs.  The DcDlCfg.dcDlAggCgPrioOverride                                         attribute is optionally defined on 5QI and QCI levels, and                                         overrides the value specified in the                                             UserPlaneProfileUeCfg.dcDlAggCgPrio                                         attribute. If the attribute is not needed, leave the value                                         empty. |
| CUUP5qi.dcDlPdcpAggrTimeDiffCg                             | UserPlaneProfileUeCfg.dcDlAggAgeDiffPreferredCg                                                                  |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| CUUP5qi.dcDlPdcpAggrTimeDiffProhibit                       | UserPlaneProfileUeCfg.dcDlAggAgeDiffProhibitTime                                                                 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| CUUP5qi.dcDlPdcpAggrTimeDiffThresh                         | UserPlaneProfileUeCfg.dcDlAggAgeDiffThresh                                                                       |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| CUUP5qi.estimatedE2ERTT                                    | AqmCfg.estimatedE2ERTT                                                                                           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| CUUP5qi.packetDelayBudget  CUUP5qi.packetDelayBudgetOffset | AqmCfg.tDiscardDl                                                                                                | The AqmCfg.tDiscardDl attribute equals the                                         sum of the CUUP5qi.packetDelayBudget and                                         the CUUP5qi.packetDelayBudgetOffset                                         attributes.                                                                                                                                                                                                                                                                                                                                                                                                               |
| CUUP5qi.tOooUlDelivery                                     | AqmCfg.tOooUlDelivery                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| CUUP5qi.l4sCfgRef                                          | DrbUeCfg.l4sCfgRef                                                                                               |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |

Guidelines for Migration from the DU5qi MO Class to the

DrbUp MO Class

The migration described in this section does not use the UE Grouping Framework and

does not create UE-specific configuration.

The following rules must be considered:

- The DU5qi.drbUpRef attribute must reference a DrbUp MO instance.
- The DrbUpUeCfg=Base MO instance must reference an AqmCfg MO instance.
- Two or more DU5qi MO instances with the same attribute values can reference a single DrbUp MO instance. This results in the same AqmCfg MO instance being used for any DU5qi MO instances.
- Different DrbUp MO instances with a child DrbUpUeCfg=Base MO instance are needed for different AQM settings. Different AqmCfg MO instances are needed.
- Automatically created instances of the following MO classes can be referenced by any DU5qi MO instance: AqmCfg DrbUp DrbUpUeCfg

Table 5   Mapping between Existing and Introduced Attributes under the DU5qi MO

Class

| Existing Attribute                                     | Introduced Attribute   | Note                                                                                                                                                                                                                                                    |
|--------------------------------------------------------|------------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| DU5qi.aqmMode                                          | AqmCfg.aqmMode         |                                                                                                                                                                                                                                                         |
| DU5qi.estimatedE2ERTT                                  | AqmCfg.estimatedE2ERTT |                                                                                                                                                                                                                                                         |
| DU5qi.packetDelayBudget  DU5qi.packetDelayBudgetOffset | AqmCfg.tDiscardDl      | The AqmCfg.tDiscardDl attribute equals the                                         sum of the DU5qi.packetDelayBudget and                                         the DU5qi.packetDelayBudgetOffset                                         attributes. |

# Appendix A: Feature Change History

This section lists changes that affected this feature and the impact it had on the

network.

## Appendix A.a: 20.Q3: Multiple DRBs per PDU sessions

This enhancement supports multiple DRBs for a PDU session, and updates the procedures

related to QoS

flows.

| Feature Name:           | QoS Framework       |
|-------------------------|---------------------|
| Feature Identity:       | FAJ 121 5157        |
| Value Package Name:     | NR Base Package     |
| Value Package Identity: | FAJ 801 4002        |
| Node Type:              | Baseband Radio Node |
| Access Type:            | NR                  |

Benefits

Up to four DRBs can be set up in one PDU session.

Capacity and Performance

No impact.

Operation

The following procedures are updated to support multiple QoS flows:

- PDU Session Resource Setup
- PDU Session Resource Modify

Interfaces

No impact.

Hardware

No special hardware requirements.

Other Network Elements

No impact.

## Appendix A.b: 22.Q4: QoS-Controlled SR Scheduling

The feature enhancement improves QoS handling in uplink scheduling in high load by

optimizing the scheduling priority of scheduling requests.

| Feature Name           | QoS Framework       |
|------------------------|---------------------|
| Feature Identity       | FAJ 121 5157        |
| Value Package Name     | NR Base Package     |
| Value Package Identity | FAJ 801 4002        |
| Node Type              | Baseband Radio Node |
| Access Type            | NR                  |
| Impact at Upgrade      | Optional            |

Summary and Benefits

By adapting the scheduling priority of scheduling requests based on the DRBs of the

UE, the uplink QoS for the UEs with high-priority DRBs is maintained. High-priority

DRBs can be, for example, voice bearers.

The feature enhancement allows the feature to be controlled through the UE Grouping

Framework and use different configurations for different UE groups.

Capacity and Performance

Packet loss is decreased during high load for high-priority DRBs.

Scheduling request latency is slightly increased for DRBs with lower priority. This

can be monitored through the

NRCellDU.pmMacPucchSrPuschGrantLatDistr PM counter.

Operation

The feature enhancement introduces the following MO classes:

- SrHandling
- SrHandlingUeCfg

The enhancement introduces the following attributes:

- SrHandling.reservedBy
- SrHandling.ueConfGroupType
- SrHandling.userLabel
- DU5qi.srHandlingRef
- DUModified5qiUeCfg.srHandlingRef
- SrHandlingUeCfg.ueGroupList
- SrHandlingUeCfg.prefUeGroupList
- SrHandlingUeCfg.ueConfGroupList
- SrHandlingUeCfg.srHandlingMode
- SrHandlingUeCfg.conditional5qi

These MO classes and attributes allow the feature to create multiple customized

profiles for scheduling request weight handling. Through the UE Grouping Framework,

different configurations can be used for different UE groups.

Interfaces

No impact.

Hardware

No specific hardware requirements.

Other Network Elements

It is recommended to use ENM version 22.4 or later to support the

MOM changes introduced by this feature enhancement. If the Release Independence

Manager application is used, the MOM changes are supported on earlier ENM versions

also.

Related Information

QoS Framework

UE Grouping Framework

## Appendix A.c: 23.Q2: Enhanced Radio Resource Partitioning Configuration Flexibility in NR

This feature enhancement improves the flexibility of the configuration of resource

partition scheduling for features related to RRP.

| Feature Name:           | Carrier Aggregation   | EN-DC RAN Slicing    | NR Radio Resource Partitioning   | QoS Framework       | RAN Slicing Framework   |
|-------------------------|-----------------------|----------------------|----------------------------------|---------------------|-------------------------|
| Feature Identity:       | FAJ 121 3046          | FAJ 121 5425         | FAJ 121 5337                     | FAJ 121 5157        | FAJ 121 5095            |
| Value Package Name:     | Carrier Aggregation   | Advanced RAN Slicing | Advanced RAN Slicing             | NR Base Package     | NR Base Package         |
| Value Package Identity: | FAJ 801 0405          | FAJ 801 4019         | FAJ 801 4019                     | FAJ 801 4002        | FAJ 801 4002            |
| Node Type:              | Baseband Radio Node   | Baseband Radio Node  | Baseband Radio Node              | Baseband Radio Node | Baseband Radio Node     |
| Access Type:            | LTE                   | NR                   | NR                               | NR                  | NR                      |
| Impact at Upgrade:      | Optional              | Optional             | Optional                         | Optional            | Optional                |

Summary

and Benefits

This feature enhancement provides the following

benefits:

- It increases flexibility in RRP and QoS.
- It provides the possibility to control the inheritance of prioritized resources in RRP.
- It prevents traffic starvation in unmapped cell partitions.
- It increases configuration options for meeting expected performance.
- It decreases the configuration complexity for traffic that is prioritized in all cell partitions.

Capacity

and Performance

NR RRP services and traffic types configured at lower

prioritiy

can decrease in capacity.

Operation

This feature enhancement deprecates the

PartitionMapping.resourcePartitionRef attribute. The

deprecated attribute is replaced by the introduced

PartitionMapping.listResourcePartitionRef attribute.

The following MO attributes are introduced to allow for increased control of NR

RRP:

- CellResourceMapping.priorityPartition5qiList
- CellResourceMapping.shareInheritance
- PartitionMapping.networkId
- ResourceAllocationPolicy.demotedRrpSchedulingPriority
- ResourceAllocationPolicy.rrpOperationModeDl
- ResourceAllocationPolicy.rrpOperationModeUl
- ServicePolicy.demotedRrpSchedulingPriority
- ServicePolicy.rrpOperationModeDl
- ServicePolicy.rrpOperationModeUl
- ResourcePartitionMember.cellIdList

The following MO attributes are updated to allow for increased control of NR RRP:

- PartitionMapping.partitionId
- PartitionMapping.caPartition
- PartitionMapping.resourceAllocationPolicyRef
- PartitionMapping.priorityPartition5qiList
- NRCellDU.nrRrpEnabled
- DU5qi.profile5qi
- CUUP5qi.profile5qi
- CUCP5qi.profile5qi

This feature enhancement updates the following EBS counters with filtering on

partitionId and serviceId:

- pmEbsMacRBSymUtilDlPartitionDistr
- pmEbsMacRBSymUtilUlPartitionDistr

The EBS counters are associated with the NRCellDU MO. For

information on the EBS counters, see Lists and Delta Lists.

This feature enhancement updates the

DuPerCellpartitionResourceRep PM event.

Hardware

No impact.

Interfaces

No impact.

Other Network Elements

It is recommended to use ENM version 23.2 or later to support the

MOM changes introduced by this feature enhancement. If the Release Independence

Manager application is used, the MOM changes are supported on earlier ENM versions

also.

The UE must support 3GPP Release 16 or

later.

Related Information

EN-DC RAN Slicing

NR Radio Resource Partitioning

QoS Framework

RAN Slicing

Carrier Aggregation