---
complexity_score: 9.5
converted_at: '2025-08-13T06:56:39.142549Z'
file_type: html
format: html
image_processing_enhanced: true
images_extracted: 2
images_saved: 3
original_path: 470_22104-LZA7016014_1Uen.L.html
pictures_extracted: 2
processing_method: docling_multimodal
quality_score: 9.0
source_file: 470_22104-LZA7016014_1Uen.L.html
source_zip: en_lzn7931040_r50f.zip
tables_extracted: 5
zip_image_types:
- .svg
- .png
- .gif
- .jpg
- .bmp
zip_images_total: 1893
---

# 

IPv4 and IPv6 Dual-Stack for X2

Contents

![Image](../images/470_22104-LZA7016014_1Uen.L/additional_3_CP.png)

![Image](../images/470_22104-LZA7016014_1Uen.L/additional_3_CP.png)

- Overview
- Dependencies
- Feature Operation
- Network Impact
- Parameters
- Performance
- Activate Non-License-Controlled Features

# 1 IPv4 and IPv6 Dual-Stack for X2 Overview

The IPv4 and IPv6 Dual-Stack feature enables using two IP addresses with different IP

versions (IPv4 and IPv6) for the same interface (X2-C or X2-U).

| Feature Name           | IPv4 and IPv6 Dual-Stack for X2                        |
|------------------------|--------------------------------------------------------|
| Feature Identity       | FAJ 121 5148                                           |
| Value Package Name     | LTE Base Package                                       |
| Value Package Identity | FAJ 801 0400                                           |
| Node Type              | Baseband Radio Node                                    |
| Access Type            | LTE                                                    |
| Licensing              | Non-license-controlled feature. No license is required |

Summary

The feature enables deploying parts of the network in IPv6 while other parts of network are

working in IPv4, and maintain X2 connectivity between these networks.

- The dual-stack eNodeB, that is configured through the X2-U interface, can maintain X2 user data traffic with IPv4 and IPv6 neighbors at the same time.
- The dual-stack eNodeB, that is configured through the X2-C interface, can establish X2 connections with IPv4 and IPv6 neighbors at the same time. The X2 connection can be set manually with OSS, or automatically by the ANR function.
- The dual-stack eNodeB, that is configured with both IPv4 and IPv6 direct X2 IPsec outer IP addresses, can establish direct X2 IPsec VPN connections with the IPv4 and IPv6 neighbors at the same time.

Full control and user plane separation is supported. Independently configuring dual-stack for

X2-C, X2-U, or both is available. The dual-stack configuration enables smooth

migration from IPv4 to IPv6 networks without losing the support of X2 at the

handover.

Together with core network support for dual-stack on S1 interface (control and user plane),

the feature can be used to interconnect IPv4 and IPv6 parts of the network.

Additional Information

For more information about the feature, see the following documents:

- Manage Transport Network
- Manage SCTP
- Manage IPsec

# 2 Dependencies of IPv4 and IPv6 Dual-Stack for X2

The feature has dependencies towards other

features.

Table 1   Feature Dependencies

| Feature                                                                            | Relationship   | Description                                                                                                                                                                                                                                           |
|------------------------------------------------------------------------------------|----------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| GTP-U Supervision (FAJ 121 2024)                                                   | Related        | The GTP-U Supervision feature can be used together with the IPv4 and                                 IPv6 Dual-Stack for X2 feature with a limitation, that some of GTP-U                                 paths on X2-U interface are not supervised. |
| Multiple IP Addresses for S1 and X2 (FAJ                                 121 4697) | Related        | The IPv4 and IPv6 dual stack can be configured for LTE X2-C and X2-U local endpoints for             primary PLMN by configuring ENodeBFunction MO. It is not possible to             configure IPv4 and IPv6 dual stack for additional PLMNs.        |

Hardware

No specific hardware requirements.

Limitations

Dual-stack for X2 EN-DC is not supported.

Network Requirements

The network infrastructure must support both IPv4 and IPv6.

The node requires support from the following network elements:

- MME version 1.39 is required to support 160-bit IP address coding.
- The neighbor eNodeB must be compliant with 3GPP TS 36.424 v15.1.0 and 3GPP TS 36.414 v12.1, and must support 160-bit IP address coding.
- It is required to use ENM version 20.08 or later to support the MOM changes introduced by this feature.

# 3 Feature Operation of IPv4 and IPv6 Dual-Stack for X2

The feature supports the configuration of X2 connections between eNodeBs that  would

not have X2 connections otherwise because of IP version mismatch.

The IPv4 and IPv6 Dual-Stack feature enables using two IP addresses with different IP

versions (IPv4 and IPv6) for the same interface (X2-C and X2-U). This allows a

dual-stack eNodeB to keep X2 connections with IPv4 and with IPv6 neighbors at the same

time. The feature can be used to interconnect IPv4 and IPv6 parts of the network

together with core network support for dual-stack (S1 interface)

by

allocating and sending

160-bit

IP address through these network elements. This allows operators to

deploy new eNodeBs based on IPv6, while keeping the other eNodeBs on IPv4.

Each

eNodeB on IPv4, or IPv6, or IPv4 and IPv6 can decode the

correct

IP address for

the different IP versions

based on

160-bit

IP address according to 3GPP TS 36.414 v12.1 as follows:

- 32 bits in case of IPv4 address according to IETF RFC 791
- 128 bits in case of IPv6 address according to IETF RFC 2460
- 160 bits if both IPv4 and IPv6 addresses are signaled, in which case the IPv4 address is contained in the first 32 bits

Operational Process

Figure 1 describes the network case and

interconnection of the eNodeB with the IPv4 and IPv6 Dual-Stack for X2

configuration.

The

160-bit

IP address in the Serving Gateway

(SGW) is allocated

and sent to the eNodeB through the

S1AP

Initial UE Context Setup Request or

E-RAB

Setup Request message. The

160-bit

IP address in the SGW is sent to the

target

eNodeB on IPv4 and IPv6 dual-stack during X2 handover.

The following

network elements must support IPv4 and IPv6

dual-stack to use

160-bit

IP address as the respected capability:

- MME
- SGW
- PDN-GW
- eNodeB

Otherwise

the mismatch of IP version causes an

X2

handover preparation failure.

Figure 1   IPv4 and IPv6 Dual-Stack for X2 Operation

IPv4 and IPv6 in the Same Network

The eNodeB can separate IPv4 and IPv6

packets, and manage a mixed situation with traffic on

IPv4 and OAM on IPv6, or the other way around. On the network level, the following

nodes with a

Dual

Stack tag are IPv4- and

IPv6-capable

as shown in Figure 1:

- MME
- SGW
- PDN-GW
- eNodeB

IPv4 and IPv6 Dual-Stack on X2-C

For X2-C dual-stack, a single SCTP endpoint is used, with two configured transport

addresses (multihomed SCTP). The addresses have different IP versions (IPv4 and

IPv6). Such SctpEndpoint MO instance is referenced by the

ENodeBFunction.sctpX2Ref attribute.

For

more information, see Manage SCTP.

If the neighbor eNodeB also uses dual-stack X2-C, both IPv4 and IPv6 paths can be

used by a single SCTP association. Path switch to or from IPv4 or IPv6 is realized

by SCTP and is transparent to LTE application. The X2-C connection is not affected

by the switch.

The SCTP association between two dual-stack eNodeBs can be initiated by using IPv4 or

IPv6 IP version, depending on remote IP address availability. If both IPv4 and IPv6

remote IP addresses are available, IPv6 is preferred. If the SCTP association

startup fails with the first remote IP address, the second remote IP address is used

for the new SCTP association attempt.

The remote IP address, for which the X2-C connection setup is successful, is stored

in the TermPointToENB.usedIpAddress attribute. This attribute

never changes during the SCTP association lifetime, even if the SCTP path is

switched to the other IP version. It can be affected during X2 reestablishment.

IPv4 and IPv6 Dual-Stack on X2-U

For X2-U dual-stack, two local IP addresses are configured with the

ENodeBFunction.upX2IpAddressRef and the

ENodeBFunction.upX2IpAddress2Ref attributes, both with

different IP versions (IPv4 and IPv6). If both attributes reference the same IP

version, the ENodeBFunction.upX2IpAddress2Ref attribute is

ignored. The dual-stack eNodeB signals both IP address versions for packet

forwarding during X2 handover or Inter-eNodeB Carrier Aggregation tunnel setup. The

peer eNodeB selects only one IP address version received in S1AP or X2AP message

from target that it supports. If both eNodeBs are dual-stack, IPv6 is selected.

To configure direct X2 IPsec outer dual-stack IP addresses,

ENodeBFunction.ipsecEpAddressRef and

ENodeBFunction.ipsecEpAddress2Ref attributes must reference

two IP addresses of different IP versions (IPv4 and IPv6). If both attributes

reference the same IP version, ENodeBFunction.ipsecEpAddress2Ref

is ignored. For more information, see Manage IPsec.

For direct X2 IPsec VPN connection setup, the initiating node sends the IPv4 and IPv6

dual-stack inner and outer IP addresses to the peer using configuration transfer

procedure in S1AP. The responding node selects the IP Address version it supports,

and sends it back to the initiating node. If both nodes are dual-stack, IPv6 is

selected.

# 4 Network Impact of IPv4 and IPv6 Dual-Stack for X2

The feature has impact on the Transport Layer Access

IEs.

Capacity and Performance

No impact.

Interfaces

Transport Layer Address IEs in S1AP and X2AP messages are coded with 160-bit coding

method when dual-stack IPv4 and IPv6 addresses are configured. More information

about affected 3GPP messages and Transport Layer Address IE coding methods can be

found in the following documentation:

- 3GPP TS 36.413, S1 Application Protocol (S1AP)
- 3GPP TS 36.423, X2 Application Protocol (X2AP)
- 3GPP TS 36.414, S1 data transport
- 3GPP TS 36.424, X2 data transport

Other Network Elements

No impact.

# 5 Parameters for IPv4 and IPv6 Dual-Stack for X2

The IPv4 and IPv6 Dual-Stack for X2 feature introduces the

ENodeBFunction.upX2IpAddress2Ref and the

EnodeBFunction.ipsecEpAddress2Ref

attributes.

Table 2   Parameters

| Parameter                         | Type       | Description                                                                                                                                                    |
|-----------------------------------|------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------|
| ENodeBFunction.upX2IpAddress2Ref  | Introduced | See MOM description.                                                                                                                                           |
| EnodeBFunction.ipsecEpAddress2Ref | Introduced | See MOM description.                                                                                                                                           |
| SctpEndpoint.localIpAddress       | Affected   | Having a mix of IPv4 and IPv6 addressees is permitted.                                                                                                         |
| ENodeBFunction.sctpEndcX2Ref      | Affecting  | The attribute cannot be configured with dual-stack IP addresses                                 because dual-stack for X2 interface on EN-DC is not supported. |
| ENodeBFunction.sctpRef            | Affecting  | S1 dual-stack configuration on the eNodeB is not supported.                                                                                                    |

# 6 Performance of IPv4 and IPv6 Dual-Stack for X2

This feature has no impact on

performance.

KPIs

This feature has no associated KPIs.

Counters

This feature has no directly associated counters.

Events

This feature has no associated events.

# 7 Activate Non-License-Controlled Features

Non-license-controlled features do not require manual activation and cannot be

deactivated.

While license-controlled features need to be activated, non-license-controlled features

are activated automatically during node integration. They also do not

have

a software license key associated, which means that they have no

entries in the LKF that is installed on the node.

In some cases, non-license-controlled features need to be configured

manually or have some of

their

subfunctions enabled to work properly.